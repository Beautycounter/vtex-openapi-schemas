{
    "openapi": "3.0.0",
    "info": {
        "title": "Profile System",
        "description": "Create shopper profiles and manage their information.",
        "contact": {},
        "version": "1.0"
    },
    "servers": [
        {
            "url": "https://{accountName}.{environment}.com.br",
            "description": "VTEX server url",
            "variables": {
                "accountName": {
                    "description": "Name of the VTEX account. Used as part of the URL",
                    "default": "{accountName}"
                },
                "environment": {
                    "description": "Environment to use. Used as part of the URL.",
                    "default": "vtexcommercestable"
                }
            }
        }
    ],
    "paths": {
        "/api/profile-system/profiles": {
            "post": {
                "tags": ["Profiles"],
                "summary": "Create client profile",
                "description": "Create a new profile for a client at your store.\n\r\n\r> The `id` field returned by this request is the `profileId` used to retrieve information on a specific profile later.",
                "operationId": "CreateClientProfile",
                "parameters": [
                    {
                        "name": "Content-Type",
                        "in": "header",
                        "description": "Type of the content being sent.",
                        "required": true,
                        "style": "simple",
                        "schema": {
                            "type": "string",
                            "default": "application/json"
                        }
                    },
                    {
                        "name": "Accept",
                        "in": "header",
                        "description": "HTTP Client Negotiation _Accept_ Header. Indicates the types of responses the client can understand.",
                        "required": true,
                        "style": "simple",
                        "schema": {
                            "type": "string",
                            "default": "application/json"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/profileSchema"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "201": {
                        "description": "Created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object"
                                },
                                "example": {
                                    "id": "c2cbebba-214e-40b2-b68f-98f862e755d5",
                                    "meta": {
                                        "version": "27112371-a71b-45d6-b3bc-93436a3a0b4f",
                                        "author": "82a2b53d-39be-4f49-bb7c-8971b58cb7dc",
                                        "creationDate": "2022-01-05T15:41:37.5009471+00:00",
                                        "lastUpdateDate": "2022-01-05T15:41:37.5009471+00:00"
                                    },
                                    "document": {
                                        "firstName": "John",
                                        "lastName": "Doe",
                                        "email": "john.doe@example.com",
                                        "birthDate": "1925-11-17",
                                        "document": "12345678911",
                                        "documentType": "CPF"
                                    }
                                }
                            }
                        }
                    }
                },
                "deprecated": false
            }
        },
        "/api/profile-system/profiles/{profileId}": {
            "get": {
                "tags": ["Profiles"],
                "summary": "Get profile data",
                "description": "Retrieve the information of a specific client, by its `profileId`.\n\r\n\r> For security and privacy reasons, this request returns masked profile data. For unmasked information, see Get profile data (unmasked).",
                "operationId": "GetProfileData",
                "parameters": [
                    {
                        "name": "Content-Type",
                        "in": "header",
                        "description": "Type of the content being sent.",
                        "required": true,
                        "style": "simple",
                        "schema": {
                            "type": "string",
                            "default": "application/json"
                        }
                    },
                    {
                        "name": "Accept",
                        "in": "header",
                        "description": "HTTP Client Negotiation _Accept_ Header. Indicates the types of responses the client can understand.",
                        "required": true,
                        "style": "simple",
                        "schema": {
                            "type": "string",
                            "default": "application/json"
                        }
                    },
                    {
                        "name": "profileId",
                        "in": "path",
                        "description": "ID of the client's profile as returned by the Create profile endpoint's response, in the `id` field.",
                        "required": true,
                        "style": "simple",
                        "schema": {
                            "type": "string",
                            "default": "70caf394-8534-447e-a0ca-1803c669c771"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {}
                                },
                                "example": [
                                    {
                                        "id": "70caf394-8534-447e-a0ca-1803c669c771",
                                        "meta": {
                                            "version": "abc",
                                            "author": "e40e0b6d-0605-4fa6-8176-1d69fbaf0818",
                                            "creationDate": "13/12/2021T00:00:00Z",
                                            "lastUpdate": "13/12/2021T00:00:00Z"
                                        },
                                        "document": {
                                            "firstName": "J***",
                                            "lastName": "D**",
                                            "email": "j***.d**@e******.c**",
                                            "birthDate": "1925-11-17",
                                            "document": "1**********",
                                            "documentType": "CPF"
                                        }
                                    }
                                ]
                            }
                        }
                    }
                },
                "deprecated": false
            }
        }
    },
    "components": {
        "schemas": {
            "profileSchema": {
                "title": "Create profile request body",
                "type": "object",
                "required": [
                    "firstName",
                    "lastName",
                    "email",
                    "document",
                    "documentType"
                ],
                "properties": {
                    "firstName": {
                        "type": "string",
                        "description": "Client's first name.",
                        "example": "John"
                    },
                    "lastName": {
                        "type": "string",
                        "description": "Client's last name.",
                        "example": "Doe"
                    },
                    "email": {
                        "type": "string",
                        "description": "Client's email address.",
                        "example": "john.doe@example.com"
                    },
                    "birthDate": {
                        "type": "string",
                        "description": "Client's birth date in ISO 8601 format.",
                        "example": "1925-11-17"
                    },
                    "document": {
                        "type": "string",
                        "description": "Client's document.",
                        "example": "12345678900"
                    },
                    "documentType": {
                        "type": "string",
                        "description": "Type of document informed in `document`.",
                        "example": "CPF"
                    }
                }
            }
        },
        "securitySchemes": {
            "appKey": {
                "type": "apiKey",
                "in": "header",
                "name": "X-VTEX-API-AppKey"
            },
            "appToken": {
                "type": "apiKey",
                "in": "header",
                "name": "X-VTEX-API-AppToken"
            }
        }
    },
    "tags": [
        {
            "name": "Profiles"
        },
        {
            "name": "Addresses"
        },
        {
            "name": "Prospects"
        },
        {
            "name": "Purchase information"
        }
    ],
    "security": [
        {
            "appKey": [],
            "appToken": []
        }
    ]
}
